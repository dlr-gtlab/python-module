stages:
  - build
  - codingstyle
  
buildWindows:
  stage: build
  script:
    - .\tests\build\build.bat 1>buildLog.txt
    - .\tests\badges\badges.bat --bw .\buildLog.txt .
  tags:
    - Windows7
  artifacts:
    paths:
      - build/GTlabPython.dll
      - build/GTlabPython.exp
      - build/GTlabPython.ilk
      - build/GTlabPython.lib
      - build/GTlabPython.pdb
      - "New_BuildWarn-W.svg"
    expire_in: 1 week

#nightlyBuildPy273:
#  stage: build
#  script:
#    - .\tests\build\build-nightly273.bat
#    - .\tests\build\copyHeaders273.bat
#  tags:
#    - Windows7
#  only:
#    - master

nightlyBuildPy373:
  stage: build
  script:
    - .\tests\build\build-nightly373.bat
    - .\tests\build\copyHeaders373.bat
  tags:
    - Windows7
  only:
    - master

codingstyle:
  stage: codingstyle
  script:
    - .\tests\codingstyle\runCodingstyle.bat 1>codingStyleLog.txt
    - .\tests\badges\badges.bat --cs .\codingStyleLog.txt .
  tags:
    - Windows7
  dependencies:
  artifacts:
    paths:
      - "nsiqcppstyle_report.xml"
      - codingStyleLog.txt
      - "New_CodingStyle.svg"
    expire_in: 1 week
